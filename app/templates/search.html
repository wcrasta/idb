<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width = device-width, initial-scale=1">
  <title>GGnoSWE</title>
  <link rel="shortcut icon" type="image/png" href="../static/images/favicon.png" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../static/css/home.css">
    <!-- Use following version of JQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <!-- Use included version of Bootstrap -->
  <script src="../static/js/bootstrap.min.js"></script>
  <style type="text/css"></style>
 <style type="text/css">
    body {
      background: url('../static/images/bg2.png');
    }

    h1 {
      color: white;
    }

    h2 {
      color: black;
      text-align: center;
      font-size: 2.5em;
    }

    p {
      text-align: left;
      color: black;
      font-size: 1.5em;
    }

    img {
      width: 200px;
      height: 200px;
      border-radius: 15px;
    }

    .center-block {
      margin-left: auto;
      margin-right: auto;
    }

    .underline {
      width: 100%;
    }

    .list-group {
      padding-left: 20px;
      padding-top: 20px;
    }
    #sort {
      width: 125px;
    }

    .highlight
    {
      background-color:yellow;
    }

  </style>
</head>

<body>
  <header>
    <!-- Starting Navigation Bar -->
    <nav class="navbar navbar-toggleable-md navbar-fixed-top" style="background-color: black; margin-top: 0;">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#nav-col">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse navbar-left" id="nav-col">
            <ul class="nav navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="/">
                  <img src="../static/images/logo.png" style="width: 100px; height: 50px; padding-top: -20px;" />
                </a>
              </li>
              <li class="nav-item" style="padding-top: 15px;">
                <a class="nav-link" href="{{ url_for('games')}}">Games
                  <span class="sr-only">(current)</span>
                </a>
              </li>
              <li class="nav-item" style="padding-top: 15px;">
                <a class="nav-link" href="{{ url_for('platforms')}}">Platforms</a>
              </li>
              <li class="nav-item" style="padding-top: 15px;">
                <a class="nav-link" href="{{ url_for('studios')}}">Studios</a>
              </li>
              <li class="nav-item" style="padding-top: 15px;">
                <a class="nav-link" href="{{ url_for('reviews')}}">Reviews</a>
              </li>
              <li class="nav-item" style="padding-top: 15px;">
                <a class="nav-link" href="{{ url_for('about')}}">About</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

  </header>


    <!-- Page Content -->
      <!-- Filtering options -->
      <!-- Beginning Search Bar -->
        <div class="col-sm-4 col-sm-offset-4"  style="top: 15%; text-align: center; position: absolute;">
          <div class="row">
           <ul class="nav nav-tabs"  >
              <li class="active"><a href="#and" data-toggle="tab">And</a></li>
            <li><a href="#or" data-toggle="tab">Or</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane active" id="and">
              <form class="form-inline" action="{{ url_for('search', typeSearch= 0 )}}" method="get" id="searchBar">
               <div class="form-group">
                 <div class="input-group input-group-lg">
                  <input type="text" name="searchAnd" class="form-control" placeholder="Search">

                    <span class="input-group-btn">
                     <button class="btn btn-secondary" type="button" style="float: left;">
                      <span class="glyphicon glyphicon-search"></span>
                     </button>
                    </span>
                  </div>
                </div>
              </form>
            </div>
            <div class="tab-pane" id="or">
              <form class="form-inline" action="{{ url_for('search', typeSearch= 1 ) }}" method="get" id="searchBar">
               <div class="form-group">
                 <div class="input-group input-group-lg">
                  <input type="text" name="searchOr" class="form-control" placeholder="Search">

                    <span class="input-group-btn">
                     <button class="btn btn-secondary" type="button" style="float: left;">
                      <span class="glyphicon glyphicon-search"></span>
                     </button>
                    </span>
                  </div>
                </div>
              </form>
            </div>

          </div>
          <div id = "searchedText">
          <h3 style="text:centered;color:white;"> Games </h3>
        <table class="table table-hover"  style="background-color: white" >
            <tr>
            <th> Games </th>
            <th> Genre </th>
            <th> Esrb </th>
            <th> Status </th>
            <th> Summary </th>
            </tr>
                {% for item in games %}
                <tr>
                  <td>
                    <a href="{{ url_for('game_instance',
                    name = item.id)}}">
                    {{item.name}} </a></td>
                  <td> {{ item.genre }} </td>
                  <td> {{item.esrb}} </td>
                  <td> {{item.status}} </td>
                  <td>
                    {% if item.summary | length >= 50 %}
                      {{item.summary[:50]}}...
                    {% else %}
                      {{item.summary}}
                    {% endif %}
                    </td>
                </tr>
                {% endfor %}
        </table>

          <h3 style="text:centered;color:white;"> Platforms </h3>


        <table class="table table-hover"  style="background-color: white" >
            <tr>
            <th> Platforms </th>
            <th> Created_At </th>
            <th> Website </th>
            <th> Summary </th>
            </tr>
                {% for item in platforms %}
                <tr>
                  <td>
                    <a href="{{ url_for('platform_instance',
                    name = item.id)}}">
                    {{item.name}} </a> </td>
                  <td> {{ item.create_at }} </td>
                  <td> {{item.website}} </td>
                  <td> {{item.summary}} </td>
                </tr>
                {% endfor %}

        </table>


        <h3 style="text:centered;color:white;"> Studios </h3>

        <table class="table table-hover"  style="background-color: white" >
          <tr>
            <th> Studios </th>
            <th> Created_at</th>
            <th> Website </th>
            <th> Description </th>
          </tr>
              {% for item in studios %}
                <tr>
                  <td>
                    <a href="{{ url_for('studio_instance', name = item.id)}}">
                    {{item.name}}</a> </td>
                  <td> {{ item.created_at }} </td>
                  <td> {{item.website}} </td>
                  <td>
                    {% if item.description | length >= 50 %}
                      {{item.description[:50]}}...
                    {% else %}
                      {{item.description}}
                    {% endif %} </td>
                </tr>
                {% endfor %}

        </table>
        <h3 style="text:centered;color:white;"> Reviews </h3>

        <table class="table table-hover"  style="background-color: white" >
          <tr>
            <th> Reviews </th>
            <th> Introduction</th>
            <th> Content </th>
            <th> Conclusion </th>
            <th> Website </th>
          </tr>
              {% for item in reviews %}
                <tr>
                  <td>
                    <a href="{{ url_for('review_instance',
                    name = item.id)}}">
                    {{item.title}}</a> </td>
                  <td>
                    {% if item.introduction | length >= 50 %}
                      {{item.introduction[:50]}}...
                    {% else %}
                      {{item.introduction}}
                    {% endif %} </td>
                  <td>
                    {% if item.content | length >= 50 %}
                      {{item.content[:50]}}...
                    {% else %}
                      {{item.content}}
                    {% endif %} </td>
                  <td>
                    {% if item.conclusion | length >= 50 %}
                      {{item.conclusion[:50]}}...
                    {% else %}
                      {{item.conclusion}}
                    {% endif %} </td>
                  <td>
                    <a href="{{item.url}}">{{item.url}}</a> </td>

                </tr>
                {% endfor %}
                 </table>
          </div>
        </div>
      </div>

    </div>

<script type ="text/javascript">

  $(document).ready(function(){

      var wordsSearched = "{{wordsSearched}}"
      var allWords = wordsSearched.split(" ")
      var wordsLength = allWords.length;

      //alert(wordsSearched)

      for (i = 0; i<wordsLength;i++)
      {

        // alert(allWords[i])
        //alert(allWords[i])
        var regex = new RegExp('(' + allWords[i] + ')', 'ig');

       $('#searchedText').html( $('#searchedText').html().replace(regex, "<span class='highlight'>$1</span>"));

        //var inputText = document.getElementById("#searchedText")
        //var innerHtml = inputText.innerHtml
        // var innerHtml = document.body.innerHtml
        // var index = innerHtml.indexOf(allWords[i])
        // alert(allWords[i])
        // alert(index)
        // if (index >=0){
        //   alert(index)
        //   innerHTML = innerHTML.substring(0,index) + "<span class='highlight'>" + innerHTML.substring(index,index+allWords[i].length) + "</span>" + innerHTML.substring(index + allWords[i].length);
        //   //inputText.innerHTML = innerHTML

        //   document.body.innerHTML = innerHTML
        // }
      }


  });


</script>

<script type="text/javascript">
$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
  var target = $(e.target).attr("href") // activated tab

  //alert(target);
});

</script>

</body>

</html>
